---
import AddToCart from "@components/static/AddToCart.astro";
import { formatters } from "@utils/index";
import type { ImageProps } from "@typings/Image";

import type { Props as ProductProps } from "@components/static/Product.astro";

export interface Props {
  title?: string;
  products?: Product[];
}

const { toUSD } = formatters();

export const defaultProps = {
  title: "TITLE_NOT_FOUND",
  price: "[@props]: PRICE_NOT_FOUND",
  marketValue: "[@props]: MARKET_VALUE_NOT_FOUND",
};

const { products, title, price, marketValue } = Astro.props;
---

<section class="relative py-20 overflow-x-hidden lg:pt-32">
  <img
    class="absolute top-0 left-0 hidden md:block"
    src="yofte-assets/elements/white-line.svg"
    alt=""
  />
  <img
    class="absolute left-0 mt-64 top-50"
    src="yofte-assets/elements/orange-line.svg"
    alt=""
  />
  <img
    class="absolute bottom-0 right-0 w-72"
    src="yofte-assets/elements/violet-line.svg"
    alt=""
  />

  <div class="container relative px-4 mx-auto">
    <h2 class="mb-16 text-4xl font-bold text-white md:text-5xl font-heading">
      {title ?? defaultProps.title}
    </h2>

    <div class="flex flex-wrap -mx-3">
      {
        products ? (
          products.map((product) => (
            <div
              class:list={[
                "hover:bg-opacity-50 hover:border-2 hover:border-white hover:animate-pulse hover:backdrop-blur-none hover:scale-90 ease-in-out box-shadow-lg duration-500 cursor-pointer",
                "w-full px-3 mb-16 pb-4 lg:w-1/3 lg:mb-0 bg-slate-100 bg-opacity-25 backdrop-blur-sm  border-1 border-white rounded-lg",
              ]}
            >
              <a class="block mb-10 " href="">
                <div class="relative">
                  <span class="absolute bottom-0 left-0 px-2 py-1 mb-6 ml-6 text-xs font-bold text-red-500 border-2 border-red-500 rounded-full font-heading">
                    {product.discount ?? ""}
                  </span>
                  <img
                    class="object-cover w-full h-96"
                    src={product.cover.src ?? "#"}
                    alt=""
                  />
                </div>
                <div class="mt-12">
                  <div class="mb-2">
                    <h3 class="mb-3 font-serif text-3xl font-bold text-white font-heading">
                      {product.name ?? ""}
                    </h3>
                    <p class="text-xl font-bold text-white font-heading">
                      <span>{toUSD(product.price) ?? ""}</span>
                      <span class="text-xs font-semibold text-gray-500 line-through font-heading">
                        {toUSD(product.marketValue) ?? ""}
                      </span>
                    </p>
                  </div>
                </div>
              </a>
              <AddToCart {...product} />
            </div>
          ))
        ) : (
          <>
            <div
              class:list={[
                "w-full px-3 mb-16 lg:w-1/3 lg:mb-0  border-1 border-white rounded-lg",
              ]}
            >
              <a class="block mb-10 " href="">
                <div class="relative">
                  <span class="absolute bottom-0 left-0 px-2 py-1 mb-6 ml-6 text-xs font-bold text-red-500 bg-white border-2 border-red-500 rounded-full font-heading" />
                  <img class="object-cover w-full h-96" alt="" />
                </div>
                <div class="mt-12">
                  <div class="mb-2">
                    <h3 class="mb-3 text-3xl font-bold text-white font-heading" />
                    <p class="text-xl font-bold text-white font-heading">
                      <span />
                      <span class="text-xs font-semibold text-gray-500 line-through font-heading" />
                    </p>
                  </div>
                </div>
              </a>
              <AddToCart />
            </div>{" "}
          </>
        )
      }
    </div>
  </div>
</section>
